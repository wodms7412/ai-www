import streamlit as st
import pandas as pd

# 1. ğŸ“‹ ìŒì‹ ì¬ë£Œ ë° ê°€ìƒ ë°ì´í„° ì„¤ì •
INGREDIENTS = [
    "ë§ˆëŠ˜ (Garlic)", "í† ë§ˆí†  (Tomato)", "ìŒ€ (Rice)", "ê³ ì¶” (Chili)",
    "íŒŒìŠ¤íƒ€ (Pasta)", "ê°ì (Potato)", "ì½”ì½”ë„› (Coconut)", "ì½© (Bean)",
    "ì¹´ë ˆ (Curry Powder)", "ì–‘íŒŒ (Onion)"
]

# ê°€ìƒì˜ ì‚¬ìš©ëŸ‰ ë°ì´í„°: ìƒìœ„ 10ê°œ êµ­ê°€ ë° ì‚¬ìš©ëŸ‰ (ì‹¤ì œ í†µê³„ ì•„ë‹˜)
data = {
    'Ingredient': ['ë§ˆëŠ˜', 'í† ë§ˆí† ', 'ìŒ€', 'ê³ ì¶”', 'íŒŒìŠ¤íƒ€', 'ê°ì', 'ì½”ì½”ë„›', 'ì½©', 'ì¹´ë ˆ', 'ì–‘íŒŒ'],
    'Country_1': ['í•œêµ­', 'ì´íƒˆë¦¬ì•„', 'ì¤‘êµ­', 'ë©•ì‹œì½”', 'ì´íƒˆë¦¬ì•„', 'í˜ë£¨', 'íƒœêµ­', 'ë¸Œë¼ì§ˆ', 'ì¸ë„', 'í”„ë‘ìŠ¤'], 'Usage_1': [95, 90, 99, 98, 99, 95, 98, 92, 99, 90],
    'Country_2': ['ìŠ¤í˜ì¸', 'ê·¸ë¦¬ìŠ¤', 'ì¸ë„', 'íƒœêµ­', 'ë¯¸êµ­', 'ëŸ¬ì‹œì•„', 'ì¸ë„ë„¤ì‹œì•„', 'ë©•ì‹œì½”', 'ì˜êµ­', 'ë…ì¼'], 'Usage_2': [88, 85, 90, 90, 80, 85, 90, 85, 75, 70],
    'Country_3': ['ì¸ë„', 'í”„ë‘ìŠ¤', 'ë² íŠ¸ë‚¨', 'ì¸ë„', 'ìŠ¤í˜ì¸', 'í´ë€ë“œ', 'ì¸ë„', 'ì½œë¡¬ë¹„ì•„', 'íƒœêµ­', 'ë¯¸êµ­'], 'Usage_3': [75, 70, 80, 75, 70, 70, 80, 70, 60, 60],
    'Country_4': ['ì´ì§‘íŠ¸', 'í„°í‚¤', 'í•„ë¦¬í•€', 'í˜ë£¨', 'ê·¸ë¦¬ìŠ¤', 'ì˜êµ­', 'ìŠ¤ë¦¬ë‘ì¹´', 'í˜ë£¨', 'ì¼ë³¸', 'ì´íƒˆë¦¬ì•„'], 'Usage_4': [65, 60, 70, 65, 60, 65, 70, 60, 50, 50],
    'Country_5': ['ê·¸ë¦¬ìŠ¤', 'ë¯¸êµ­', 'ë¸Œë¼ì§ˆ', 'ì¤‘êµ­', 'í”„ë‘ìŠ¤', 'ì•„ì¼ëœë“œ', 'ì¤‘êµ­', 'ì•„ë¥´í—¨í‹°ë‚˜', 'íŒŒí‚¤ìŠ¤íƒ„', 'ìŠ¤í˜ì¸'], 'Usage_5': [55, 50, 60, 55, 50, 55, 60, 50, 40, 40],
    'Country_6': ['í”„ë‘ìŠ¤', 'ìŠ¤í˜ì¸', 'ì¼ë³¸', 'ìŠ¤í˜ì¸', 'ë…ì¼', 'ì¹ ë ˆ', 'ë¸Œë¼ì§ˆ', 'ì¸ë„', 'íŒŒí‚¤ìŠ¤íƒ„', 'ì¤‘êµ­'], 'Usage_6': [45, 40, 50, 45, 40, 45, 50, 40, 30, 30],
    'Country_7': ['ëŸ¬ì‹œì•„', 'ë…ì¼', 'íƒœêµ­', 'ì½œë¡¬ë¹„ì•„', 'í„°í‚¤', 'í”„ë‘ìŠ¤', 'ë² íŠ¸ë‚¨', 'ë‚˜ì´ì§€ë¦¬ì•„', 'ë§ë ˆì´ì‹œì•„', 'ì˜êµ­'], 'Usage_7': [35, 30, 40, 35, 30, 35, 40, 30, 20, 20],
    'Country_8': ['ë¯¸êµ­', 'ë¸Œë¼ì§ˆ', 'ì´ë€', 'ë¯¸êµ­', 'ë¸Œë¼ì§ˆ', 'ì´íƒˆë¦¬ì•„', 'ë¯¸êµ­', 'ìºë‚˜ë‹¤', 'ì‹±ê°€í¬ë¥´', 'ë¸Œë¼ì§ˆ'], 'Usage_8': [25, 20, 30, 25, 20, 25, 30, 20, 10, 10],
    'Country_9': ['ë©•ì‹œì½”', 'ì˜êµ­', 'í•œêµ­', 'ì•„ë¥´í—¨í‹°ë‚˜', 'ì¸ë„', 'ë„¤ëœë€ë“œ', 'íŒŒí‚¤ìŠ¤íƒ„', 'ì´íƒˆë¦¬ì•„', 'í˜¸ì£¼', 'ìºë‚˜ë‹¤'], 'Usage_9': [15, 10, 20, 15, 10, 15, 20, 10, 5, 5],
    'Country_10': ['ìºë‚˜ë‹¤', 'ì¼ë³¸', 'ì´íƒˆë¦¬ì•„', 'ìºë‚˜ë‹¤', 'ë©•ì‹œì½”', 'ìºë‚˜ë‹¤', 'ì•„í”„ë¦¬ì¹´', 'ì˜êµ­', 'ë‰´ì§ˆëœë“œ', 'í•œêµ­'], 'Usage_10': [10, 5, 10, 5, 5, 10, 10, 5, 1, 1],
}
df_base = pd.DataFrame(data)

# êµ­ê°€ë³„ ì¶”ì²œ ìŒì‹ ë°ì´í„° (ìŒì‹ ì´ë¦„, ì§§ì€ ì„¤ëª…, ê°€ìƒ ì´ë¯¸ì§€ URL í¬í•¨)
FOOD_RECOMMENDATIONS = {
    'í•œêµ­': [
        {'name': 'ê¹€ì¹˜ì°Œê°œ', 'desc': 'ë§¤ì½¤í•˜ê³  ì‹œí¼í•œ í•œêµ­ì˜ ëŒ€í‘œ êµ­ë¬¼ ìš”ë¦¬.', 'img': 'http://placehold.it/150x100?text=Kimchi_Jjigae'},
        {'name': 'ë¹„ë¹”ë°¥', 'desc': 'ì—¬ëŸ¬ ë‚˜ë¬¼ê³¼ ê³ ì¶”ì¥ì„ ì„ì–´ ë¨¹ëŠ” ì˜ì–‘ ë§Œì  ë°¥ ìš”ë¦¬.', 'img': 'http://placehold.it/150x100?text=Bibimbap'},
        {'name': 'ë¶ˆê³ ê¸°', 'desc': 'ë‹¬ì½¤í•œ ê°„ì¥ ì–‘ë…ì— ì¬ìš´ ì†Œê³ ê¸° êµ¬ì´.', 'img': 'http://placehold.it/150x100?text=Bulgogi'}
    ],
    'ì´íƒˆë¦¬ì•„': [
        {'name': 'í”¼ì ë§ˆë¥´ê²Œë¦¬íƒ€', 'desc': 'í† ë§ˆí† , ëª¨ì§œë ë¼, ë°”ì§ˆë¡œ ë§Œë“  ë‚˜í´ë¦¬ í”¼ìì˜ ê¸°ë³¸.', 'img': 'http://placehold.it/150x100?text=Pizza'},
        {'name': 'ë¼ìëƒ', 'desc': 'ë„“ì í•œ íŒŒìŠ¤íƒ€ ì‹œíŠ¸ ì‚¬ì´ì— ê³ ê¸° ì†ŒìŠ¤ì™€ ì¹˜ì¦ˆë¥¼ ê²¹ì¹œ ìš”ë¦¬.', 'img': 'http://placehold.it/150x100?text=Lasagna'},
        {'name': 'í‹°ë¼ë¯¸ìˆ˜', 'desc': 'ì»¤í”¼ì— ì ì‹  ë ˆì´ë””í•‘ê±°ì™€ ë§ˆìŠ¤ì¹´ë¥´í¬ë„¤ ì¹˜ì¦ˆë¡œ ë§Œë“  ë””ì €íŠ¸.', 'img': 'http://placehold.it/150x100?text=Tiramisu'}
    ],
    'ì¤‘êµ­': [
        {'name': 'ë§ˆíŒŒë‘ë¶€', 'desc': 'ë‘ë¶€ë¥¼ ë§¤ì½¤í•œ ì–‘ë…ì— ë“ì—¬ë‚¸ ì‚¬ì²œ ì§€ë°©ì˜ ìš”ë¦¬.', 'img': 'http://placehold.it/150x100?text=Mapo_Tofu'},
        {'name': 'ë² ì´ì§• ë•', 'desc': 'ë°”ì‚­í•˜ê²Œ êµ¬ì›Œë‚¸ ì˜¤ë¦¬ ê»ì§ˆì„ ì¶˜ì¥, íŒŒì™€ í•¨ê»˜ ì‹¸ë¨¹ëŠ” ìš”ë¦¬.', 'img': 'http://placehold.it/150x100?text=Peking_Duck'},
        {'name': 'ë”¤ì„¬', 'desc': 'ì‘ì€ ì ‘ì‹œì— ë‹¤ì–‘í•œ ì¢…ë¥˜ì˜ ë§Œë‘ì™€ ê°„ì‹ì„ ë‹´ì•„ë‚¸ ê´‘ë‘¥ ìš”ë¦¬.', 'img': 'http://placehold.it/150x100?text=Dimsum'}
    ],
    'ë©•ì‹œì½”': [
        {'name': 'íƒ€ì½”', 'desc': 'ì‘ì€ í† ë¥´í‹°ì•¼ì— ê³ ê¸°, ì±„ì†Œ, ì‚´ì‚¬ë¥¼ ì˜¬ë ¤ ë¨¹ëŠ” ëŒ€í‘œì ì¸ ê°„í¸ì‹.', 'img': 'http://placehold.it/150x100?text=Taco'},
        {'name': 'ì—”ì¹ ë¼ë‹¤', 'desc': 'í† ë¥´í‹°ì•¼ì— ì†ì„ ì±„ìš°ê³  ì†ŒìŠ¤ë¥¼ ì–¹ì–´ ì˜¤ë¸ì— êµ¬ìš´ ìš”ë¦¬.', 'img': 'http://placehold.it/150x100?text=Enchilada'},
        {'name': 'í€˜ì‚¬ë””ì•„', 'desc': 'ì¹˜ì¦ˆë¥¼ ë„£ì€ í† ë¥´í‹°ì•¼ë¥¼ êµ¬ì›Œ ë°˜ìœ¼ë¡œ ì ‘ì–´ ë§Œë“  ìš”ë¦¬.', 'img': 'http://placehold.it/150x100?text=Quesadilla'}
    ],
    'í˜ë£¨': [
        {'name': 'ì„¸ë¹„ì²´', 'desc': 'ìƒì„ ì„ ë ˆëª¬ì´ë‚˜ ë¼ì„ì¦™ì— ì¬ì›Œ ìµíŒ ìƒí¼í•œ í•´ì‚°ë¬¼ ìƒëŸ¬ë“œ.', 'img': 'http://placehold.it/150x100?text=Ceviche'},
        {'name': 'ë¡œëª¨ ì‚´íƒ€ë„', 'desc': 'ì‡ ê³ ê¸°, ê°ìíŠ€ê¹€, ì•¼ì±„ë¥¼ ë³¶ì•„ ë§Œë“  í˜ë£¨ì‹ ë³¶ìŒ ìš”ë¦¬.', 'img': 'http://placehold.it/150x100?text=Lomo_Saltado'},
        {'name': 'ì•„íˆ ë° ê°€ì´ë‚˜', 'desc': 'ë‹­ê³ ê¸°ë¥¼ ë§¤ì½¤í•œ í¬ë¦¼ ì†ŒìŠ¤ì— ë„£ì–´ ë§Œë“  ë¶€ë“œëŸ¬ìš´ ìŠ¤íŠœ.', 'img': 'http://placehold.it/150x100?text=Aji_de_Gallina'}
    ],
    'íƒœêµ­': [
        {'name': 'íŒŸíƒ€ì´', 'desc': 'ìƒˆìš°, ìˆ™ì£¼ ë“±ì„ ë„£ê³  ë³¶ì€ íƒœêµ­ì˜ ëŒ€í‘œì ì¸ ë³¶ìŒ ìŒ€êµ­ìˆ˜.', 'img': 'http://placehold.it/150x100?text=Pad_Thai'},
        {'name': 'ë˜ ì–Œê¿', 'desc': 'ìƒˆìš°, ë ˆëª¬ê·¸ë¼ìŠ¤, ê³ ì¶” ë“±ì„ ë„£ì€ ì„¸ê³„ 3ëŒ€ ìˆ˜í”„ ì¤‘ í•˜ë‚˜.', 'img': 'http://placehold.it/150x100?text=Tom_Yum_Goong'},
        {'name': 'ê·¸ë¦° ì»¤ë¦¬', 'desc': 'ì½”ì½”ë„› ë°€í¬ì™€ ê·¸ë¦° ì»¤ë¦¬ í˜ì´ìŠ¤íŠ¸ë¥¼ ë„£ì€ í–¥ê¸‹í•œ ì»¤ë¦¬.', 'img': 'http://placehold.it/150x100?text=Green_Curry'}
    ],
    'ì¸ë„': [
        {'name': 'íƒ„ë‘ë¦¬ ì¹˜í‚¨', 'desc': 'ìš”êµ¬ë¥´íŠ¸ì™€ í–¥ì‹ ë£Œì— ì¬ì›Œ íƒ„ë‘ë¥´ì—ì„œ êµ¬ìš´ ë‹­ê³ ê¸°.', 'img': 'http://placehold.it/150x100?text=Tandoori'},
        {'name': 'ë‚œ (Naan)', 'desc': 'íƒ„ë‘ë¥´ì—ì„œ êµ¬ì›Œë‚¸ ì¸ë„ì˜ ëŒ€í‘œì ì¸ ë‚©ì‘í•œ ë¹µ.', 'img': 'http://placehold.it/150x100?text=Naan'},
        {'name': 'ì‚¬ëª¨ì‚¬', 'desc': 'ê°ìì™€ ì™„ë‘ì½© ë“±ì„ ì±„ì›Œ ì‚¼ê°í˜•ìœ¼ë¡œ íŠ€ê²¨ë‚¸ ë§Œë‘.', 'img': 'http://placehold.it/150x100?text=Samosa'}
    ],
    'ë¸Œë¼ì§ˆ': [
        {'name': 'í˜ì´ì¡°ì•„ë‹¤', 'desc': 'ê²€ì€ì½©ê³¼ ë¼ì§€ê³ ê¸°ë¥¼ ë„£ì–´ ë“ì¸ ë¸Œë¼ì§ˆì˜ ì „í†µ ìŠ¤íŠœ.', 'img': 'http://placehold.it/150x100?text=Feijoada'},
        {'name': 'ìŠˆí•˜ìŠ¤ì½”', 'desc': 'ì‡ ê³ ê¸°, ë¼ì§€ê³ ê¸° ë“± ë‹¤ì–‘í•œ ê³ ê¸°ë¥¼ ê¼¬ì¹˜ì— ê¿°ì–´ êµ¬ìš´ ë°”ë¹„í.', 'img': 'http://placehold.it/150x100?text=Churrasco'},
        {'name': 'íŒŒìŠ¤í…”', 'desc': 'ì–‡ì€ ë°˜ì£½ì— ì†ì„ ì±„ì›Œ íŠ€ê¸´ ë¸Œë¼ì§ˆì‹ íŠ€ê¹€ ë§Œë‘.', 'img': 'http://placehold.it/150x100?text=Pastel'}
    ],
    'í”„ë‘ìŠ¤': [
        {'name': 'í¬ë£¨ì•„ìƒ', 'desc': 'ë²„í„° í’ë¯¸ê°€ ê°€ë“í•œ ì´ˆìŠ¹ë‹¬ ëª¨ì–‘ì˜ ë°”ì‚­í•œ ë¹µ.', 'img': 'http://placehold.it/150x100?text=Croissant'},
        {'name': 'ë¼íƒ€íˆ¬ì´', 'desc': 'ê°€ì§€, í˜¸ë°•, í† ë§ˆí†  ë“±ì„ ì˜¬ë¦¬ë¸Œ ì˜¤ì¼ì— ë³¶ì•„ ë§Œë“  ìš”ë¦¬.', 'img': 'http://placehold.it/150x100?text=Ratatouille'},
        {'name': 'ì—ìŠ¤ì¹´ë¥´ê³ ', 'desc': 'ë§ˆëŠ˜ ë²„í„°ë¡œ ì–‘ë…í•œ ë‹¬íŒ½ì´ ìš”ë¦¬.', 'img': 'http://placehold.it/150x100?text=Escargot'}
    ],
    'ìŠ¤í˜ì¸': [
        {'name': 'íŒŒì—ì•¼', 'desc': 'ìŒ€ì— í•´ì‚°ë¬¼, ê³ ê¸°, ì‚¬í”„ë€ì„ ë„£ê³  ë§Œë“  ìŠ¤í˜ì¸ì‹ ë³¶ìŒë°¥.', 'img': 'http://placehold.it/150x100?text=Paella'},
        {'name': 'íƒ€íŒŒìŠ¤', 'desc': 'ì™€ì¸ì´ë‚˜ ìˆ ê³¼ ê³ë“¤ì´ëŠ” ë‹¤ì–‘í•œ ì¢…ë¥˜ì˜ ì‘ì€ ìš”ë¦¬.', 'img': 'http://placehold.it/150x100?text=Tapas'},
        {'name': 'ê°€ìŠ¤íŒŒì´ˆ', 'desc': 'í† ë§ˆí† ì™€ ì•¼ì±„ë¥¼ ì°¨ê°‘ê²Œ ê°ˆì•„ ë§ˆì‹œëŠ” ìŠ¤í˜ì¸ì‹ ìˆ˜í”„.', 'img': 'http://placehold.it/150x100?text=Gazpacho'}
    ],
}


# --- Streamlit ì•± ë©”ì¸ í•¨ìˆ˜ ---
def main():
    st.set_page_config(page_title="ìŒì‹ ì¬ë£Œ ë¶„ì„ê¸°", layout="wide")
    st.title("ğŸœ ì¬ë£Œë³„ êµ­ê°€ ì‚¬ìš©ëŸ‰ ë¶„ì„ê¸° (ìˆœì°¨ ì •ë ¬)")
    st.markdown("---")

    st.sidebar.header("ì¬ë£Œë¥¼ ì„ íƒí•˜ì„¸ìš”")
    selected_ingredient = st.sidebar.selectbox(
        'ì–´ë–¤ ì¬ë£Œì— ëŒ€í•´ ì•Œì•„ë³´ê³  ì‹¶ìœ¼ì‹ ê°€ìš”?',
        INGREDIENTS
    )

    ingredient_name = selected_ingredient.split(' ')[0]

    st.header(f"ì„ íƒëœ ì¬ë£Œ: **{selected_ingredient}**")
    st.markdown("---")

    try:
        selected_row = df_base[df_base['Ingredient'] == ingredient_name].iloc[0]

        # --- ì¬ë£Œ ì‚¬ìš©ëŸ‰ ê·¸ë˜í”„ë¥¼ ìœ„í•œ ë°ì´í„° ì¤€ë¹„ (10ê°œ êµ­ê°€) ---
        countries = [selected_row[f'Country_{i}'] for i in range(1, 11)]
        usages = [selected_row[f'Usage_{i}'] for i in range(1, 11)]
        
        # DataFrame ìƒì„±
        chart_data = pd.DataFrame({
            'Country': countries,
            'Usage': usages,
        })
        
        # â­ í•µì‹¬ ìˆ˜ì •: Usage ê¸°ì¤€ìœ¼ë¡œ ë‚´ë¦¼ì°¨ìˆœ ì •ë ¬
        chart_data = chart_data.sort_values(by='Usage', ascending=False).set_index('Country')

        st.subheader(f"ğŸ“Š {selected_ingredient}ì„(ë¥¼) ë§ì´ ì“°ëŠ” êµ­ê°€ Top 10 (ìˆœìœ„ë³„ ì •ë ¬)")
        # Streamlit ë‚´ì¥ ì°¨íŠ¸ ì‚¬ìš©
        st.bar_chart(chart_data)

        st.markdown("---")

        # --- ì¶”ì²œ ìŒì‹ (Top 1 êµ­ê°€) í‘œì‹œ ---
        # ì •ë ¬ëœ ë°ì´í„°í”„ë ˆì„ì—ì„œ ê°€ì¥ ì²« ë²ˆì§¸ êµ­ê°€ê°€ Top 1 êµ­ê°€ì„
        selected_country = chart_data.index[0] 

        st.subheader(f"ğŸ½ï¸ ì¬ë£Œë¥¼ ê°€ì¥ ë§ì´ ì“°ëŠ” êµ­ê°€, **{selected_country}**ì˜ ì¶”ì²œ ìŒì‹ 3ê°€ì§€")
        
        if selected_country in FOOD_RECOMMENDATIONS:
            foods = FOOD_RECOMMENDATIONS[selected_country]
            
            col1, col2, col3 = st.columns(3)
            
            for i, col in enumerate([col1, col2, col3]):
                with col:
                    food = foods[i]
                    st.metric(f"ì¶”ì²œ {i+1}", food['name'])
                    st.image(food['img'], caption=food['name'], width=200)
                    st.caption(f"_{food['desc']}_")
                
        else:
            st.warning(f"ì£„ì†¡í•©ë‹ˆë‹¤, {selected_country}ì— ëŒ€í•œ ì¶”ì²œ ìŒì‹ ì •ë³´ê°€ ë¶€ì¡±í•©ë‹ˆë‹¤.")

    except IndexError:
        st.error(f"ë°ì´í„°ë² ì´ìŠ¤ì— **{ingredient_name}** ì¬ë£Œ ì •ë³´ê°€ ì—†ìŠµë‹ˆë‹¤. ê´€ë¦¬ìì—ê²Œ ë¬¸ì˜í•˜ì„¸ìš”.")
        
    st.markdown("---")
    st.caption("ğŸš¨ ì´ ì•±ì˜ ë°ì´í„°(ì‚¬ìš©ëŸ‰, ì¶”ì²œ ìŒì‹)ì™€ ì´ë¯¸ì§€ëŠ” **ë°ëª¨ë¥¼ ìœ„í•œ ê°€ìƒì˜ ì •ë³´**ì…ë‹ˆë‹¤.")

if __name__ == "__main__":
    main()
    
